const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./iframe-BwnOPLvB.js","./preload-helper-D9Z9MdNV.js","./iframe-8nzp3Krn.css"])))=>i.map(i=>d[i]);
import{_ as Y}from"./preload-helper-D9Z9MdNV.js";typeof window<"u"&&typeof document<"u"&&(Y(()=>import("./labs-input-mjzwpLHe.js"),[],import.meta.url),Y(()=>import("./labs-card-Do2eTuA7.js"),[],import.meta.url),Y(()=>import("./labs-toast-DQleqG0U.js"),[],import.meta.url),Y(()=>import("./iframe-BwnOPLvB.js").then(t=>t.l),__vite__mapDeps([0,1,2]),import.meta.url),Y(()=>import("./iframe-BwnOPLvB.js").then(t=>t.b),__vite__mapDeps([0,1,2]),import.meta.url),(async()=>{try{await import(new URL("data:text/javascript;base64,Ly8gVGhlbWVUb2dnbGUuanMKLy8gUmV1c2FibGUgdGhlbWUgdG9nZ2xlIGJ1dHRvbiBmb3IgU3Rvcnlib29rIGFuZCBhcHBzCmltcG9ydCB7IGFwcGx5VGhlbWUgfSBmcm9tICcuLi91dGlscy90aGVtZS5qcyc7CgpleHBvcnQgZnVuY3Rpb24gY3JlYXRlVGhlbWVUb2dnbGVCdXR0b24oeyBwYXJlbnQgPSBkb2N1bWVudC5ib2R5IH0gPSB7fSkgewogIC8vIFJlbW92ZSBhbnkgZXhpc3RpbmcgdG9nZ2xlCiAgY29uc3QgZXhpc3RpbmcgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmxhYnMtdGhlbWUtdG9nZ2xlJyk7CiAgaWYgKGV4aXN0aW5nKSBleGlzdGluZy5yZW1vdmUoKTsKCiAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFicy1idXR0b24nKTsKICBidG4uY2xhc3NOYW1lID0gJ2xhYnMtdGhlbWUtdG9nZ2xlJzsKICBidG4uc2V0QXR0cmlidXRlKCd2YXJpYW50JywgJ3NlY29uZGFyeScpOwogIGJ0bi5zZXRBdHRyaWJ1dGUoJ3NpemUnLCAnbGFyZ2UnKTsKICBidG4uc3R5bGUubWFyZ2luID0gJzFyZW0nOwogIGJ0bi5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CiAgYnRuLnN0eWxlLnRvcCA9ICcxcmVtJzsKICBidG4uc3R5bGUucmlnaHQgPSAnMXJlbSc7CiAgYnRuLnN0eWxlLnpJbmRleCA9IDEwMDA7CgogIGZ1bmN0aW9uIHVwZGF0ZUxhYmVsKCkgewogICAgY29uc3QgaXNEYXJrID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtZGFyaycpOwogICAgLy8gUmVtb3ZlIGFueSBleGlzdGluZyBpY29uIGFuZCBsYWJlbAogICAgQXJyYXkuZnJvbShidG4uY2hpbGROb2RlcykuZm9yRWFjaChuID0+IGJ0bi5yZW1vdmVDaGlsZChuKSk7CiAgICAvLyBDcmVhdGUgYW5kIGFwcGVuZCB0aGUgaWNvbiBlbGVtZW50IGZvciB0aGUgbGVmdCBzbG90CiAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFicy1pY29uJyk7CiAgICBpY29uLnNldEF0dHJpYnV0ZSgnc2xvdCcsICdpY29uLWxlZnQnKTsKICAgIGljb24uc2V0QXR0cmlidXRlKCduYW1lJywgaXNEYXJrID8gJ2JlZHRpbWVfb2ZmJyA6ICdiZWR0aW1lJyk7CiAgICBidG4uYXBwZW5kQ2hpbGQoaWNvbik7CiAgICAvLyBBcHBlbmQgdGhlIGxhYmVsIGFzIGEgdGV4dCBub2RlIG9ubHkgd2hlbiBub3QgY29sbGFwc2VkIGZvciBzbWFsbCBzY3JlZW5zCiAgICBjb25zdCBjb2xsYXBzZWQgPSBidG4uZ2V0QXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlJykgPT09ICdzbWFsbCc7CiAgICBpZiAoIWNvbGxhcHNlZCkgewogICAgICBidG4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXNEYXJrID8gJ1R1cm4gb24gbGlnaHQgbW9kZScgOiAnVHVybiBvbiBkYXJrIG1vZGUnKSk7CiAgICB9IGVsc2UgewogICAgICAvLyBlbnN1cmUgYW4gYWNjZXNzaWJsZSBsYWJlbCBleGlzdHMgd2hlbiBpY29uLW9ubHkKICAgICAgYnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGlzRGFyayA/ICdUdXJuIG9uIGxpZ2h0IG1vZGUnIDogJ1R1cm4gb24gZGFyayBtb2RlJyk7CiAgICB9CiAgfQoKICBidG4ub25jbGljayA9ICgpID0+IHsKICAgIGNvbnN0IGlzRGFyayA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKTsKICAgIC8vIERldGVjdCBjdXJyZW50IGZsYXZvciBmcm9tIHRoZSByb290IGVsZW1lbnQncyBjbGFzc0xpc3QKICAgIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICBjb25zdCBmbGF2b3JDbGFzcyA9IEFycmF5LmZyb20ocm9vdC5jbGFzc0xpc3QpLmZpbmQoYyA9PiBjLnN0YXJ0c1dpdGgoJ2ZsYXZvci0nKSk7CiAgICBjb25zdCBmbGF2b3IgPSBmbGF2b3JDbGFzcyA/IGZsYXZvckNsYXNzLnJlcGxhY2UoJ2ZsYXZvci0nLCAnJykgOiAndmFuaWxsYSc7CiAgICBhcHBseVRoZW1lKHsgZmxhdm9yLCB0aGVtZTogaXNEYXJrID8gJ2xpZ2h0JyA6ICdkYXJrJyB9KTsKICAgIHVwZGF0ZUxhYmVsKCk7CiAgfTsKCiAgLy8gS2VlcCB0aGUgdmlzaWJsZSBsYWJlbCBpbiBzeW5jIHdpdGggZXh0ZXJuYWwgdGhlbWUgY2hhbmdlcyAodG9vbGJhciwgb3RoZXIgdG9nZ2xlcykKICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHVwZGF0ZUxhYmVsKCkpOwogIHRyeSB7CiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXSB9KTsKICB9IGNhdGNoIChlKSB7CiAgICAvLyBpZ25vcmUgaWYgb2JzZXJ2ZSBmYWlscyBpbiBzb21lIGVudmlyb25tZW50cwogIH0KCiAgLy8gUmVzcG9uc2l2ZSBjb2xsYXBzZTogaGlkZSBsYWJlbCBhdCBzbWFsbCB3aWR0aHMgYnkgc2V0dGluZyBkYXRhLWNvbGxhcHNlPSJzbWFsbCIKICBmdW5jdGlvbiB1cGRhdGVDb2xsYXBzZSgpIHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGlzU21hbGwgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNzAwcHgpJykubWF0Y2hlczsKICAgICAgaWYgKGlzU21hbGwpIGJ0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGFwc2UnLCAnc21hbGwnKTsKICAgICAgZWxzZSBidG4ucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWNvbGxhcHNlJyk7CiAgICB9IGNhdGNoIChlKSB7IH0KICB9CiAgLy8gYWRqdXN0IHZpc3VhbCB2YXJpYW50IHdoZW4gY29sbGFwc2VkIHRvIHVzZSBpY29uLW9ubHkgc3R5bGUKICAoZnVuY3Rpb24gd2F0Y2hDb2xsYXBzZSgpIHsKICAgIGNvbnN0IG1xID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDcwMHB4KScpOwogICAgZnVuY3Rpb24gYXBwbHlWYXJpYW50KCkgewogICAgICBjb25zdCBpc1NtYWxsID0gbXEubWF0Y2hlczsKICAgICAgaWYgKGlzU21hbGwpIHsKICAgICAgICBidG4uc2V0QXR0cmlidXRlKCd2YXJpYW50JywgJ2ljb24nKTsKICAgICAgICBidG4uc2V0QXR0cmlidXRlKCdzaXplJywgJ21lZGl1bScpOwogICAgICB9IGVsc2UgewogICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ3ZhcmlhbnQnLCAnc2Vjb25kYXJ5Jyk7CiAgICAgICAgYnRuLnNldEF0dHJpYnV0ZSgnc2l6ZScsICdsYXJnZScpOwogICAgICB9CiAgICAgIC8vIHJlZnJlc2ggbGFiZWwvaWNvbiBjb250ZW50IHRvIHJlZmxlY3QgdGhlIHZhcmlhbnQgc3RhdGUKICAgICAgdXBkYXRlTGFiZWwoKTsKICAgIH0KICAgIHRyeSB7CiAgICAgIG1xLmFkZEV2ZW50TGlzdGVuZXIgPyBtcS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhcHBseVZhcmlhbnQpIDogbXEuYWRkTGlzdGVuZXIoYXBwbHlWYXJpYW50KTsKICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgYXBwbHlWYXJpYW50KCk7CiAgfSkoKTsKICB1cGRhdGVDb2xsYXBzZSgpOwogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB1cGRhdGVDb2xsYXBzZSk7CgogIHVwZGF0ZUxhYmVsKCk7CiAgcGFyZW50LmFwcGVuZENoaWxkKGJ0bik7CiAgcmV0dXJuIGJ0bjsKfQo=",import.meta.url).href)}catch(t){console.warn("Could not load ThemeToggle at runtime:",t)}})());let w=null;typeof HTMLElement<"u"&&(w=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._items=[],this._load(),this._lastAdd={value:"",ts:0},this._isBuilt=!1,this._timers={},this._onSubmit=this._onSubmit.bind(this),this._ensureToast(),this._onThemeChanged=()=>{this._updateThemeIcon(),this._render()},document.addEventListener("themeChanged",this._onThemeChanged),this._build().then(()=>{this._isBuilt=!0,this._setupEventListeners(),this.initSystemTheme(),this._ensureToast(),this._updateThemeIcon(),this._render()})}async _build(){const t=document.createElement("style");try{const r=await fetch(new URL("data:text/css;base64,LyogU2hhcmVkIFRvZGF5IExpc3QgZW50cnkgcGF0dGVybiBzdHlsZXMgKHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGgpICovCi50bC1lbnRyeSB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC8qIHZlcnRpY2FsbHkgY2VudGVyIGNvbnRlbnQgKi8KICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgcGFkZGluZzogMC43NXJlbSAxcmVtOwogIGJvcmRlci1yYWRpdXM6IDhweDsKICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlKTsKICBjb2xvcjogdmFyKC0tY29sb3Itb24tc3VyZmFjZSk7CiAgZ2FwOiAwLjc1cmVtOwogIG1pbi1oZWlnaHQ6IDMuNXJlbTsKfQoKLnRsLWVudHJ5LWxlZnQgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgZ2FwOiAwLjc1cmVtOwogIG1pbi13aWR0aDogMDsKICBmbGV4OiAxOwp9CgoudGwtZW50cnktY29udGVudCB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIC8qIHZlcnRpY2FsbHkgY2VudGVyIHRleHQvbWV0YSAqLwogIGdhcDogMC4yNXJlbTsKICBtaW4td2lkdGg6IDA7CiAgZmxleDogMTsKfQoKLnRsLWVudHJ5LXRleHQgewogIG92ZXJmbG93OiBoaWRkZW47CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICBmb250LXdlaWdodDogNjAwOwogIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKTsKfQoKLnRsLWVudHJ5LW1ldGEgewogIGZvbnQtc2l6ZTogdmFyKC0tZm9udC1zaXplLWJvZHkteHMsIDEycHgpOwogIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKTsKICBvcGFjaXR5OiAwLjc7Cn0KCi50bC1lbnRyeS1hY3Rpb25zIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogIGdhcDogMC41cmVtOwogIC8qIHNsaWdodGx5IGxhcmdlciBnYXAgZm9yIGNsYXJpdHkgKi8KICBtYXJnaW4tdG9wOiAwLjEyNXJlbTsKfQoKLnRsLWVudHJ5LWhlYWRlci5jb21wbGV0ZWQgewogIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoOwogIG9wYWNpdHk6IDAuNjsKfQoKLyogSG92ZXIgc3RhdGVzIGZvciBhY3Rpb24gYnV0dG9ucyAqLwoudGwtZW50cnktYWN0aW9ucyBsYWJzLWJ1dHRvblt2YXJpYW50PSJpY29uIl06aG92ZXIgewogIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWhvdmVyLWxpZ2h0LCByZ2JhKDAsIDAsIDAsIDAuMDUpKTsKfQoKLyogSWNvbiBjb2xvciBkZWZhdWx0IGFuZCBob3ZlcjogbWFrZSBpY29ucyB2aXNpYmxlIGFuZCB1c2UgcHJpbWFyeSBkYXJrZXIgb24gaG92ZXIgKi8KLnRsLWVudHJ5LWFjdGlvbnMgbGFicy1idXR0b25bdmFyaWFudD0iaWNvbiJdIGxhYnMtaWNvbiB7CiAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpOwogIG9wYWNpdHk6IDAuODsKfQoKLnRsLWVudHJ5LWFjdGlvbnMgbGFicy1idXR0b25bdmFyaWFudD0iaWNvbiJdOmhvdmVyIGxhYnMtaWNvbiB7CiAgY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpOwogIG9wYWNpdHk6IDE7Cn0KCi8qIERlbGV0ZSBidXR0b246IGNoYW5nZSBpY29uIGNvbG9yIHRvIGRhbmdlciBvbiBob3ZlciAoZG9uJ3QgZmlsbCB0aGUgYnV0dG9uKSAqLwoudGwtZW50cnktYWN0aW9ucyBsYWJzLWJ1dHRvbltkYXRhLWFjdGlvbj0iZGVsZXRlIl0gewogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Owp9CgoudGwtZW50cnktYWN0aW9ucyBsYWJzLWJ1dHRvbltkYXRhLWFjdGlvbj0iZGVsZXRlIl0gbGFicy1pY29uIHsKICBjb2xvcjogdmFyKC0tY29sb3Itb24tc3VyZmFjZSk7CiAgb3BhY2l0eTogMC44Owp9CgoudGwtZW50cnktYWN0aW9ucyBsYWJzLWJ1dHRvbltkYXRhLWFjdGlvbj0iZGVsZXRlIl06aG92ZXIgbGFicy1pY29uIHsKICBjb2xvcjogdmFyKC0tY29sb3ItZXJyb3IpOwogIG9wYWNpdHk6IDE7Cn0KCi8qIEFyY2hpdmUvcmVzdG9yZSBzdGF0ZXMgKi8KLnRsLWVudHJ5LmFyY2hpdmVkIHsKICBvcGFjaXR5OiAwLjY7Cn0KCi50bC1lbnRyeS5hcmNoaXZlZCAudGwtZW50cnktdGV4dCwKLnRsLWVudHJ5LmFyY2hpdmVkIC50bC1lbnRyeS1tZXRhIHsKICBvcGFjaXR5OiAwLjc7Cn0KCi8qIEZsb2F0aW5nIHJlbW92ZS1hbGwgYnV0dG9uIGluIGJvdHRvbS1yaWdodCBvZiB2aWV3cG9ydCAqLwoudG9kYXktbGlzdC1hcHAgLmZsb2F0aW5nLXJlbW92ZSB7CiAgcG9zaXRpb246IGZpeGVkOwogIHJpZ2h0OiAxcmVtOwogIGJvdHRvbTogMXJlbTsKICB6LWluZGV4OiAxMjAwOwp9CgovKiBFbnN1cmUgbGlzdHMgaGF2ZSBjb21mb3J0YWJsZSB2ZXJ0aWNhbCBzcGFjaW5nICovCi5saXN0IHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZ2FwOiAwLjc1cmVtOwp9CgovKiBIb3Jpem9udGFsIHBhZGRpbmcgZm9yIG90aGVyIGxpc3RzIHNvIHRoZXkgYWxpZ24gd2l0aCB0b2RheS1saXN0IGVudHJpZXMgKi8KLmxpc3QudG9kYXktbGlzdCwKLmxpc3QuY29tcGxldGVkLWxpc3QsCi5saXN0LmFyY2hpdmVkLWxpc3QgewogIHBhZGRpbmc6IDAgMXJlbTsKfQoKLyogU3BhY2luZyBiZWxvdyB0aGUgZGF0ZS90b2RheSBoZWFkZXIgKi8KLnRvZGF5LWhlYWRlciB7CiAgbWFyZ2luLWJvdHRvbTogMS41cmVtOwp9CgovKiBTZWN0aW9uIHNwYWNpbmcgYmV0d2VlbiBUb2RheSwgQ29tcGxldGVkLCBhbmQgQXJjaGl2ZWQgc2VjdGlvbnMgKi8KLnNlY3Rpb24gewogIG1hcmdpbi1ib3R0b206IDJyZW07Cn0KCi5zZWN0aW9uLXRpdGxlIHsKICBtYXJnaW4tdG9wOiAycmVtOwogIG1hcmdpbi1ib3R0b206IDFyZW07CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBjb2xvcjogdmFyKC0tY29sb3Itb24tYmFja2dyb3VuZCk7Cn0KCi8qIENvbnRyb2xzIHNwYWNpbmcgLSBzcGFjaW5nIGJldHdlZW4gVG9kYXkgYW5kIEFkZCBJdGVtICovCi5jb250cm9scyB7CiAgbWFyZ2luLWJvdHRvbTogMnJlbTsKfQoKLyogQXJjaGl2ZSBhbmQgcmVzdG9yZSBpY29ucyBzaG91bGQgYmUgdmlzaWJsZSB3aXRoIGNvbnNpc3RlbnQgY29sb3JzICovCi50bC1lbnRyeS1hY3Rpb25zIGxhYnMtYnV0dG9uW2FyaWEtbGFiZWw9IkFyY2hpdmUiXSBsYWJzLWljb24sCi50bC1lbnRyeS1hY3Rpb25zIGxhYnMtYnV0dG9uW2FyaWEtbGFiZWw9IlJlc3RvcmUgaXRlbSJdIGxhYnMtaWNvbiB7CiAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpOwogIG9wYWNpdHk6IDAuODsKfQoKLnRsLWVudHJ5LWFjdGlvbnMgbGFicy1idXR0b25bYXJpYS1sYWJlbD0iQXJjaGl2ZSJdOmhvdmVyIGxhYnMtaWNvbiwKLnRsLWVudHJ5LWFjdGlvbnMgbGFicy1idXR0b25bYXJpYS1sYWJlbD0iUmVzdG9yZSBpdGVtIl06aG92ZXIgbGFicy1pY29uIHsKICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7CiAgb3BhY2l0eTogMTsKfQoKLyogSG9yaXpvbnRhbCBwYWRkaW5nIGZvciBUb2RheSBMaXN0IGNvbnRhaW5lciBzbyBlbnRyaWVzIGFsaWduIHdpdGggZW50cnkgcGFkZGluZyAqLwoubGlzdC50b2RheS1saXN0IHsKICBwYWRkaW5nOiAwIDFyZW07Cn0KCi8qIFJlbW92ZSBidXR0b24gYmFja2dyb3VuZCBmaWxscyBmb3IgY2xlYW4gYXBwZWFyYW5jZSAqLwoudG9kYXktbGlzdC1hcHAgbGFicy1idXR0b25bdmFyaWFudD0iaWNvbiJdIHsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9Cg==",import.meta.url));if(r.ok)t.textContent=await r.text();else throw new Error("CSS not found")}catch(r){console.warn("Could not load tl-entry.css, using fallback styles:",r),t.textContent=`
          .today-list-app {
            padding: 16px;
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 600px;
            margin: 0 auto;
          }
          .tl-entry {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            gap: 12px;
          }
          .tl-entry-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
          }
          .tl-entry-title {
            font-weight: 600;
            line-height: 1.4;
          }
          .tl-entry-meta {
            font-size: 12px;
            color: #666;
          }
          .tl-entry-actions {
            display: flex;
            gap: 8px;
          }
          .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 18px;
            padding: 4px 0;
          }
          .app-title h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
          }
          .version-badge {
            background: #007AFF;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            margin-left: 8px;
          }
          .section-title {
            font-weight: 600;
            margin: 16px 0 8px;
            color: #333;
          }
          .date-label {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 18px;
            color: #333;
          }
          .controls {
            margin: 12px 0 18px 0;
          }
          .list {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
          }
          .empty {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 40px 16px;
          }
          .archived-section {
            opacity: 0.7;
          }
          labs-button[variant="icon"]:hover {
            background: rgba(0, 0, 0, 0.1);
          }
          labs-button[data-action="delete"]:hover {
            background: rgba(255, 59, 48, 0.1);
          }
        `}this.shadowRoot.appendChild(t);const s=document.createElement("div");s.className="today-list-app";let n=null,e=null,a=null;if(!this.hasAttribute("hide-header")){n=document.createElement("div"),n.className="app-header";const r=document.createElement("div");r.className="app-title",r.innerHTML=`
          <h1>Today List</h1>
          <span class="version-badge">v2.1.5</span>
        `,e=document.createElement("labs-button"),e.setAttribute("variant","icon"),e.className="theme-toggle";const G=document.createElement("span");G.setAttribute("slot","icon-left");const W=document.createElement("labs-icon");W.setAttribute("name","bedtime"),G.appendChild(W),e.appendChild(G),a=document.createElement("labs-button"),a.setAttribute("variant","icon"),a.className="flavor-toggle";const Z=document.createElement("span");Z.setAttribute("slot","icon-left");const A=document.createElement("labs-icon");A.setAttribute("name","palette"),Z.appendChild(A),a.appendChild(Z);const v=document.createElement("labs-button");v.setAttribute("variant","icon"),v.setAttribute("aria-label","Reset all items"),v.className="reset-all";const B=document.createElement("span");B.setAttribute("slot","icon-left");const X=document.createElement("labs-icon");X.setAttribute("name","delete_sweep"),B.appendChild(X),v.appendChild(B),v.addEventListener("click",V=>{V.stopPropagation(),this._resetAll()});const y=document.createElement("div");y.style.display="flex",y.style.gap="8px",y.appendChild(v),y.appendChild(a),y.appendChild(e),n.appendChild(r),n.appendChild(y)}const d=document.createElement("div");d.className="today-header";const c=document.createElement("div");c.className="date-label",c.textContent=this._formatDateLabel(new Date),d.appendChild(c);let b=null;this.hasAttribute("hide-header")||(b=document.createElement("div"),b.className="controls",this._input=document.createElement("labs-input"),this._input.setAttribute("id","today-list-input"),this._input.setAttribute("name","today-list-input"),this._input.setAttribute("placeholder","Add item and press Enter"),b.appendChild(this._input));const m=document.createElement("div");m.className="section";const g=document.createElement("div");g.className="list today-list",this._todayList=g,m.appendChild(g);const p=document.createElement("div");p.className="section";const C=document.createElement("div");C.className="section-title",C.textContent="Completed";const I=document.createElement("div");I.className="list completed-list",this._completedList=I,p.appendChild(C),p.appendChild(I);const u=document.createElement("div");u.className="section archived-section",this._archivedSection=u,n&&s.appendChild(n),s.appendChild(d),b&&s.appendChild(b),s.appendChild(m),s.appendChild(p),s.appendChild(u);const i=document.createElement("div");i.className="floating-remove";const o=document.createElement("labs-button");o.setAttribute("variant","icon"),o.setAttribute("aria-label","Remove all items");const l=document.createElement("span");l.setAttribute("slot","icon-left");const h=document.createElement("labs-icon");h.setAttribute("name","delete_sweep"),l.appendChild(h),o.appendChild(l),o.addEventListener("click",r=>{r.stopPropagation(),this._resetAll()}),i.appendChild(o),this.shadowRoot.appendChild(i),this.shadowRoot.appendChild(s)}_setupEventListeners(){const t=this.shadowRoot.querySelector(".theme-toggle");t&&t.addEventListener("click",()=>{this.toggleTheme()});const s=this.shadowRoot.querySelector(".flavor-toggle");s&&s.addEventListener("click",()=>{this.cycleFlavor()}),this._input&&(this._input.removeEventListener("submit",this._onSubmit),this._input.addEventListener("submit",this._onSubmit))}applyTheme({flavor:t="vanilla",theme:s="light"}={}){const n=document.documentElement;n.classList.remove("flavor-vanilla","flavor-blueberry","flavor-strawberry"),n.classList.add(`flavor-${t}`),n.classList.remove("theme-light","theme-dark"),n.classList.add(`theme-${s}`),n.setAttribute("data-color-scheme",s),localStorage.setItem("today-list-theme",s),localStorage.setItem("today-list-flavor",t);const e=document.querySelector('meta[name="theme-color"]'),a=getComputedStyle(n).getPropertyValue("--color-background").trim();e&&a&&e.setAttribute("content",a)}initSystemTheme(t="light"){const s=localStorage.getItem("today-list-theme"),n=localStorage.getItem("today-list-flavor");s||n?this.applyTheme({flavor:n||"vanilla",theme:s||t}):this.applyTheme({flavor:"vanilla",theme:"light"})}toggleTheme(){const t=document.documentElement.classList.contains("theme-dark"),s=document.documentElement,n=Array.from(s.classList).find(a=>a.startsWith("flavor-")),e=n?n.replace("flavor-",""):"vanilla";this.applyTheme({flavor:e,theme:t?"light":"dark"}),this._updateThemeIcon()}cycleFlavor(){const t=document.documentElement,s=["vanilla","blueberry","strawberry"],n=Array.from(t.classList).find(c=>c.startsWith("flavor-")),e=n?n.replace("flavor-",""):"vanilla",a=s[(s.indexOf(e)+1)%s.length],d=t.classList.contains("theme-dark");this.applyTheme({flavor:a,theme:d?"dark":"light"})}_startEditableTimer(t){if(!t||!t.id)return;const s=t.id,n=Date.now();if(t.editableUntil&&t.editableUntil>n){const e=t.editableUntil-n;this._timers[s]&&clearTimeout(this._timers[s]),this._timers[s]=setTimeout(()=>{this._lockItem(s)},e)}else t.editableUntil&&t.editableUntil<=n&&this._lockItem(s)}_lockItem(t){const s=this._items.findIndex(e=>e.id===t);if(s===-1)return;const n=this._items[s];n.locked=!0,delete n.editableUntil,this._save(),this._render(),this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t])}_addItem(t){const s=Date.now();if(this._lastAdd.value===t&&s-this._lastAdd.ts<250)return;this._lastAdd.value=t,this._lastAdd.ts=s;const n={id:Date.now()+Math.random().toString(36).slice(2,7),text:t,completed:!1,createdAt:new Date().toISOString(),restoredFrom:null,archived:!1,locked:!1,editableUntil:Date.now()+5e3};this._items.unshift(n),this._startEditableTimer(n),this._save(),this._render(),this._showToast("Item added",{actionText:"Edit",duration:5e3}).then(()=>{const e=()=>{n._editing=!0,this._render(),a()},a=()=>{this._toast&&this._toast.removeEventListener("action",e)};this._toast&&this._toast.addEventListener("action",e,{once:!0})})}connectedCallback(){this._isBuilt&&(this._load(),this._ensureToast(),this._updateThemeIcon(),this._render())}disconnectedCallback(){try{this._input&&this._input.removeEventListener("submit",this._onSubmit)}catch{}document.removeEventListener("themeChanged",this._onThemeChanged)}_updateThemeIcon(){const t=this.shadowRoot.querySelector(".theme-toggle labs-icon"),s=this.shadowRoot.querySelector(".theme-toggle");if(t&&s){const n=document.documentElement.classList.contains("theme-dark");t.setAttribute("name",n?"bedtime_off":"bedtime"),s.setAttribute("aria-label",n?"Switch to light mode":"Switch to dark mode")}}_formatDateLabel(t){const s=new Date,n=new Date(s.getFullYear(),s.getMonth(),s.getDate());return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()===n.getTime()?"Today":t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}_formatTimestamp(t){return new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}_isToday(t){const s=new Date,n=new Date(s.getFullYear(),s.getMonth(),s.getDate()),e=new Date(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()===n.getTime()}_groupItemsByDate(){const t={};return this._items.forEach(s=>{const n=new Date(s.createdAt),e=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`;t[e]||(t[e]={date:n,items:[]}),t[e].items.push(s)}),t}async _ensureToast(){if(!customElements.get("labs-toast"))try{await import(new URL("data:text/javascript;base64,Ly8gTWluaW1hbCBsYWJzLXRvYXN0IHdlYiBjb21wb25lbnQKY2xhc3MgTGFic1RvYXN0IGV4dGVuZHMgSFRNTEVsZW1lbnQgewogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIHRoaXMuX3NoYWRvdyA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pOwoKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICd0b2FzdCc7CiAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdyb2xlJywgJ3N0YXR1cycpOwogICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpOwogICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1hdG9taWMnLCAndHJ1ZScpOwoKICAgIGNvbnN0IG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIG1lc3NhZ2UuY2xhc3NOYW1lID0gJ21lc3NhZ2UnOwogICAgdGhpcy5fbWVzc2FnZSA9IG1lc3NhZ2U7CgogICAgY29uc3QgYWN0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgYWN0aW9ucy5jbGFzc05hbWUgPSAnYWN0aW9ucyc7CgogICAgY29uc3QgYWN0aW9uQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICBhY3Rpb25CdG4uY2xhc3NOYW1lID0gJ2FjdGlvbic7CiAgICBhY3Rpb25CdG4uc2V0QXR0cmlidXRlKCdwYXJ0JywgJ2FjdGlvbicpOwogICAgYWN0aW9uQnRuLnR5cGUgPSAnYnV0dG9uJzsKICAgIGFjdGlvbkJ0bi50ZXh0Q29udGVudCA9ICdVbmRvJzsKICAgIHRoaXMuX2FjdGlvbkJ0biA9IGFjdGlvbkJ0bjsKCiAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgY2xvc2VCdG4uY2xhc3NOYW1lID0gJ2Nsb3NlJzsKICAgIGNsb3NlQnRuLnNldEF0dHJpYnV0ZSgncGFydCcsICdjbG9zZScpOwogICAgY2xvc2VCdG4udHlwZSA9ICdidXR0b24nOwogICAgY2xvc2VCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0Rpc21pc3MnKTsKICAgIGNsb3NlQnRuLnRleHRDb250ZW50ID0gJ+KclSc7CiAgICB0aGlzLl9jbG9zZUJ0biA9IGNsb3NlQnRuOwoKICAgIGFjdGlvbnMuYXBwZW5kQ2hpbGQoYWN0aW9uQnRuKTsKICAgIGFjdGlvbnMuYXBwZW5kQ2hpbGQoY2xvc2VCdG4pOwoKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlKTsKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhY3Rpb25zKTsKCiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBzdHlsZS50ZXh0Q29udGVudCA9IGA6aG9zdHtwb3NpdGlvbjpmaXhlZDtsZWZ0OjUwJTtib3R0b206dmFyKC0tdG9hc3QtYm90dG9tLDI0cHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO3otaW5kZXg6OTk5OTtkaXNwbGF5OmJsb2NrfQoudG9hc3R7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDttaW4td2lkdGg6MjAwcHg7bWF4LXdpZHRoOjY0MHB4O3BhZGRpbmc6MTJweCAxNnB4O2JvcmRlci1yYWRpdXM6MTBweDtiYWNrZ3JvdW5kOnZhcigtLWNvbG9yLXN1cmZhY2UsI2ZmZik7Y29sb3I6dmFyKC0tY29sb3Itb24tc3VyZmFjZSk7Ym94LXNoYWRvdzp2YXIoLS1lbGV2YXRpb24tMSwgMCA2cHggMjBweCByZ2JhKDAsMCwwLC4xMikpO2JvcmRlcjoxcHggc29saWQgY29sb3ItbWl4KGluIHNyZ2IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpIDYlLCB0cmFuc3BhcmVudCk7b3BhY2l0eTowO3BvaW50ZXItZXZlbnRzOm5vbmU7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoOHB4KTt0cmFuc2l0aW9uOm9wYWNpdHkgLjE4cyBlYXNlLHRyYW5zZm9ybSAuMThzIGVhc2V9Ci50b2FzdC5zaG93e29wYWNpdHk6MTtwb2ludGVyLWV2ZW50czphdXRvO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfQoubWVzc2FnZXtmbGV4OjE7Zm9udC1zaXplOjAuOTVyZW19Ci5hY3Rpb25ze2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweH0KLmFjdGlvbntiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjowO3BhZGRpbmc6NnB4IDEwcHg7Ym9yZGVyLXJhZGl1czo4cHg7Y29sb3I6dmFyKC0tY29sb3ItcHJpbWFyeSk7Y3Vyc29yOnBvaW50ZXI7Zm9udC13ZWlnaHQ6NjAwfQouY2xvc2V7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6MDtwYWRkaW5nOjZweCA4cHg7Ym9yZGVyLXJhZGl1czo4cHg7Y29sb3I6dmFyKC0tY29sb3Itb24tc3VyZmFjZSk7Y3Vyc29yOnBvaW50ZXJ9CmA7CgogICAgdGhpcy5fc2hhZG93LmFwcGVuZENoaWxkKHN0eWxlKTsKICAgIHRoaXMuX3NoYWRvdy5hcHBlbmRDaGlsZChjb250YWluZXIpOwoKICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjsKICAgIHRoaXMuX3RpbWVvdXQgPSBudWxsOwoKICAgIHRoaXMuX29uQWN0aW9uID0gdGhpcy5fb25BY3Rpb24uYmluZCh0aGlzKTsKICAgIHRoaXMuX29uQ2xvc2UgPSB0aGlzLl9vbkNsb3NlLmJpbmQodGhpcyk7CiAgfQoKICBjb25uZWN0ZWRDYWxsYmFjaygpIHsKICAgIHRoaXMuX2FjdGlvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uQWN0aW9uKTsKICAgIHRoaXMuX2Nsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbG9zZSk7CiAgfQoKICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHsKICAgIHRoaXMuX2FjdGlvbkJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uQWN0aW9uKTsKICAgIHRoaXMuX2Nsb3NlQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbG9zZSk7CiAgICB0aGlzLl9jbGVhclRpbWVvdXQoKTsKICB9CgogIHNob3codGV4dCwgeyBhY3Rpb25UZXh0ID0gJ1VuZG8nLCBkdXJhdGlvbiA9IDUwMDAgfSA9IHt9KSB7CiAgICB0aGlzLl9tZXNzYWdlLnRleHRDb250ZW50ID0gdGV4dDsKICAgIHRoaXMuX2FjdGlvbkJ0bi50ZXh0Q29udGVudCA9IGFjdGlvblRleHQ7CiAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2hvdycpOwogICAgdGhpcy5fY2xlYXJUaW1lb3V0KCk7CiAgICBpZiAoZHVyYXRpb24gPiAwKSB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmhpZGUoKSwgZHVyYXRpb24pOwogICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnc2hvdycsIHsgYnViYmxlczogdHJ1ZSwgY29tcG9zZWQ6IHRydWUgfSkpOwogIH0KCiAgaGlkZSgpIHsKICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICB0aGlzLl9jbGVhclRpbWVvdXQoKTsKICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2Rpc21pc3MnLCB7IGJ1YmJsZXM6IHRydWUsIGNvbXBvc2VkOiB0cnVlIH0pKTsKICB9CgogIF9vbkFjdGlvbigpIHsKICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2FjdGlvbicsIHsgZGV0YWlsOiB7IG1lc3NhZ2U6IHRoaXMuX21lc3NhZ2UudGV4dENvbnRlbnQgfSwgYnViYmxlczogdHJ1ZSwgY29tcG9zZWQ6IHRydWUgfSkpOwogICAgdGhpcy5oaWRlKCk7CiAgfQoKICBfb25DbG9zZSgpIHsKICAgIHRoaXMuaGlkZSgpOwogIH0KCiAgX2NsZWFyVGltZW91dCgpIHsKICAgIGlmICh0aGlzLl90aW1lb3V0KSB7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTsKICAgICAgdGhpcy5fdGltZW91dCA9IG51bGw7CiAgICB9CiAgfQp9CgppZiAoIWN1c3RvbUVsZW1lbnRzLmdldCgnbGFicy10b2FzdCcpKSB7CiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdsYWJzLXRvYXN0JywgTGFic1RvYXN0KTsKfQoKZXhwb3J0IGRlZmF1bHQgTGFic1RvYXN0Owo=",import.meta.url).href)}catch(t){console.warn("Could not import labs-toast:",t)}if(!document.body.querySelector("labs-toast")){const t=document.createElement("labs-toast");document.body.appendChild(t)}this._toast=document.body.querySelector("labs-toast")}_showToast(t,s={}){try{return this._ensureToast().then(()=>{this._toast&&typeof this._toast.show=="function"?this._toast.show(t,s):console.warn("labs-toast not available to show message:",t)})}catch{return Promise.resolve()}}_resetAll(){if(!this._items||!this._items.length)return;const t=this._items.slice();this._items=[],this._save(),this._render(),this._showToast("Cleared all items",{actionText:"Undo",duration:5e3}).then(()=>{const s=()=>{this._items=t.slice(),this._save(),this._render(),e()},n=()=>{e()},e=()=>{this._toast&&this._toast.removeEventListener("action",s),this._toast&&this._toast.removeEventListener("dismiss",n)};this._toast&&this._toast.addEventListener("action",s,{once:!0}),this._toast&&this._toast.addEventListener("dismiss",n,{once:!0})})}_save(){try{localStorage.setItem("today-list-items",JSON.stringify(this._items))}catch{}}_load(){try{const t=localStorage.getItem("today-list-items");t?this._items=JSON.parse(t)||[]:this._items=[]}catch{this._items=[]}}_onSubmit(t){const s=t&&t.detail&&t.detail.value&&t.detail.value.trim();if(!s)return;const n=Date.now();if(this._lastAdd||(this._lastAdd={value:"",ts:0}),this._lastAdd.value===s&&n-this._lastAdd.ts<250)return;this._lastAdd.value=s,this._lastAdd.ts=n,this._input&&this._input.value!==void 0&&(this._input.value="");const e={id:Date.now()+Math.random().toString(36).slice(2,7),text:s,completed:!1,createdAt:new Date().toISOString(),restoredFrom:null};this._items.unshift(e),this._save(),this._render()}openInput(){try{this.dispatchEvent(new CustomEvent("request-open-input",{bubbles:!0,composed:!0}))}catch{}}addItem(t){const s=t&&String(t).trim();if(!s)return;const n=Date.now();if(this._lastAdd||(this._lastAdd={value:"",ts:0}),this._lastAdd.value===s&&n-this._lastAdd.ts<250)return;this._lastAdd.value=s,this._lastAdd.ts=n;const e={id:Date.now()+Math.random().toString(36).slice(2,7),text:s,completed:!1,createdAt:new Date().toISOString(),restoredFrom:null,archived:!1,locked:!1,editableUntil:Date.now()+5e3};this._items.unshift(e),this._startEditableTimer(e),this._save(),this._render()}_restoreItem(t){if(t.restoredFrom)return;const s={id:Date.now()+Math.random().toString(36).slice(2,7),text:t.text,completed:!1,createdAt:new Date().toISOString(),restoredFrom:t.id,archived:!1,locked:!1,editableUntil:Date.now()+5e3};t.restoredFrom=s.id,this._items.unshift(s),this._startEditableTimer(s),this._save(),this._render()}_render(){if(this._todayList.innerHTML="",this._completedList.innerHTML="",this._archivedSection.innerHTML="",!this._items.length){const e=document.createElement("div");e.className="empty",e.textContent="No items yet â€” add something using the input above.",this._todayList.appendChild(e);return}const t=this._items.filter(e=>!e.archived&&!e.completed&&this._isToday(e.createdAt)),s=this._items.filter(e=>!e.archived&&e.completed),n=this._items.filter(e=>e.archived);if(t.length===0){const e=document.createElement("div");e.className="empty",e.textContent="No items for today yet.",this._todayList.appendChild(e)}else t.forEach((e,a)=>{const d=this._createItemElement(e,a,"today");this._todayList.appendChild(d)});if(s.length===0){const e=document.createElement("div");e.className="empty",e.textContent="No completed items.",this._completedList.appendChild(e)}else s.forEach((e,a)=>{const d=this._createItemElement(e,a,"completed");this._completedList.appendChild(d)});if(n.length>0){const e={};n.forEach(a=>{const d=this._formatTimestamp(a.createdAt);e[d]||(e[d]=[]),e[d].push(a)}),Object.keys(e).forEach(a=>{const d=document.createElement("div");d.className="archived-divider";const c=document.createElement("div");c.className="section-title",c.textContent=a;const b=document.createElement("div");b.className="list archived-list",e[a].forEach((m,g)=>{const p=this._createItemElement(m,g,"archived");b.appendChild(p)}),d.appendChild(c),d.appendChild(b),this._archivedSection.appendChild(d)})}}_createItemElement(t,s,n){const e=document.createElement("div");e.className=`tl-entry ${n==="archived"?"archived":""}`;const a=document.createElement("div");a.className="tl-entry-left";const d=document.createElement("labs-button");d.setAttribute("variant","icon"),d.setAttribute("aria-label",t.completed?"Mark undone":"Mark done");const c=document.createElement("span");c.setAttribute("slot","icon-left");const b=document.createElement("labs-icon");b.setAttribute("name",t.completed?"check_box":"check_box_outline_blank"),c.appendChild(b),d.appendChild(c),d.addEventListener("click",i=>{i.stopPropagation(),!t.completed&&(t.completed=!0,t.locked=!0,this._save(),this._render(),this._showToast("Item completed",{actionText:"Undo",duration:5e3}).then(()=>{const o=()=>{t.completed=!1,t.locked=!1,this._save(),this._render(),l()},l=()=>{this._toast&&this._toast.removeEventListener("action",o)};this._toast&&this._toast.addEventListener("action",o,{once:!0})}))});const m=document.createElement("div");m.className="tl-entry-content";const g=document.createElement("div");g.className=`tl-entry-text ${t.completed?"completed":""} ${t.locked?"locked":""}`;const p=Date.now(),C=!t.locked&&(!t.editableUntil||t.editableUntil>p);if(t._editing&&C){const i=document.createElement("labs-input");i.setAttribute("keep",""),i.value=t.text||"",i.addEventListener("submit",o=>{const l=o&&o.detail&&o.detail.value&&o.detail.value.trim();l!=null&&(t.text=l,t.locked=!0,delete t.editableUntil,delete t._editing,this._save(),this._render())});try{setTimeout(()=>{try{i.focus()}catch{}},20)}catch{}g.appendChild(i)}else{const i=document.createElement("div");i.textContent=t.text||"",i.className=t.text?"filled":"empty",C&&(i.style.cursor="text",i.addEventListener("click",o=>{o.stopPropagation(),!t.locked&&(!t.editableUntil||t.editableUntil>Date.now())&&(t._editing=!0,this._render())})),g.appendChild(i)}const I=document.createElement("div");I.className="tl-entry-meta",I.textContent=this._formatTimestamp(t.createdAt),m.appendChild(g),m.appendChild(I),a.appendChild(d),a.appendChild(m);const u=document.createElement("div");if(u.className="tl-entry-actions",n==="archived")if(t.restoredFrom){const i=document.createElement("labs-button");i.setAttribute("variant","icon"),i.setAttribute("aria-label","Item already restored"),i.style.opacity="0.5",i.style.pointerEvents="none";const o=document.createElement("span");o.setAttribute("slot","icon-left");const l=document.createElement("labs-icon");l.setAttribute("name","published_with_changes"),o.appendChild(l),i.appendChild(o),u.appendChild(i)}else{const i=document.createElement("labs-button");i.setAttribute("variant","icon"),i.setAttribute("aria-label","Restore item");const o=document.createElement("span");o.setAttribute("slot","icon-left");const l=document.createElement("labs-icon");l.setAttribute("name","history"),o.appendChild(l),i.appendChild(o),i.addEventListener("click",h=>{h.stopPropagation(),this._restoreItem(t)}),u.appendChild(i)}else{const i=document.createElement("labs-button");i.setAttribute("variant","icon"),i.setAttribute("aria-label","Archive");const o=document.createElement("span");o.setAttribute("slot","icon-left");const l=document.createElement("labs-icon");l.setAttribute("name","history"),o.appendChild(l),i.appendChild(o),i.addEventListener("click",W=>{W.stopPropagation(),t.archived=!0,t.archivedAt=new Date().toISOString(),this._save(),this._render(),this._showToast("Item archived",{actionText:"Undo",duration:5e3}).then(()=>{const Z=()=>{t.archived=!1,delete t.archivedAt,this._save(),this._render(),A()},A=()=>{this._toast&&this._toast.removeEventListener("action",Z)};this._toast&&this._toast.addEventListener("action",Z,{once:!0})})}),u.appendChild(i);const h=document.createElement("labs-button");h.setAttribute("variant","icon"),h.setAttribute("aria-label","Delete"),h.setAttribute("data-action","delete");const r=document.createElement("span");r.setAttribute("slot","icon-left");const G=document.createElement("labs-icon");G.setAttribute("name","delete_forever"),r.appendChild(G),h.appendChild(r),h.addEventListener("click",W=>{W.stopPropagation(),this._deleteWithUndo(t,s)}),u.appendChild(h)}return e.addEventListener("click",i=>{const o=i.composedPath?i.composedPath():i.path||[];for(const l of o)if(!(!l||!l.className)&&(l.tagName&&l.tagName.toLowerCase()==="labs-button"||l.classList&&l.classList.contains&&l.classList.contains("tl-entry-actions")||l.tagName&&l.tagName.toLowerCase()==="labs-input"))return;t.archived||t.locked||(t.completed=!t.completed,t.completed&&(t.locked=!0),this._save(),this._render(),t.completed&&this._showToast("Item completed",{actionText:"Undo",duration:5e3}).then(()=>{const l=()=>{t.completed=!1,t.locked=!1,this._save(),this._render(),h()},h=()=>{this._toast&&this._toast.removeEventListener("action",l)};this._toast&&this._toast.addEventListener("action",l,{once:!0})}))}),e.appendChild(a),e.appendChild(u),e}_archiveWithUndo(t,s){t.archived=!0,t.archivedAt=new Date().toISOString(),this._save(),this._render(),this._showToast("Item archived",{actionText:"Undo",duration:5e3}).then(()=>{const n=()=>{t.archived=!1,delete t.archivedAt,this._save(),this._render(),a()},e=()=>{a()},a=()=>{this._toast&&this._toast.removeEventListener("action",n),this._toast&&this._toast.removeEventListener("dismiss",e)};this._toast&&this._toast.addEventListener("action",n,{once:!0}),this._toast&&this._toast.addEventListener("dismiss",e,{once:!0})})}_deleteWithUndo(t,s){const n=this._items.findIndex(a=>a.id===t.id);if(n===-1)return;const e=this._items.splice(n,1)[0];this._save(),this._render(),this._showToast("Item deleted",{actionText:"Undo",duration:5e3}).then(()=>{const a=()=>{this._items.unshift(e),this._save(),this._render(),c()},d=()=>{c()},c=()=>{this._toast&&this._toast.removeEventListener("action",a),this._toast&&this._toast.removeEventListener("dismiss",d)};this._toast&&this._toast.addEventListener("action",a,{once:!0}),this._toast&&this._toast.addEventListener("dismiss",d,{once:!0})})}},customElements.get("today-list-app")||customElements.define("today-list-app",w));const N={title:"Apps/Today List"},R=()=>document.createElement("today-list-app");R.parameters={...R.parameters,docs:{...R.parameters?.docs,source:{originalSource:`() => {
  const el = document.createElement('today-list-app');
  return el;
}`,...R.parameters?.docs?.source}}};const _=["Default"];export{R as Default,_ as __namedExportsOrder,N as default};
