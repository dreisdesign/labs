class f extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._observer=null,this.render=this.render.bind(this),this.render()}static get observedAttributes(){return["label"]}connectedCallback(){const s=document.documentElement;this._observer=new MutationObserver(r=>{for(const e of r)if(e.attributeName==="class"){this.render();break}}),this._observer.observe(s,{attributes:!0,attributeFilter:["class"]})}disconnectedCallback(){this._observer&&(this._observer.disconnect(),this._observer=null)}attributeChangedCallback(){this.render()}getFlavorName(){const s=[...document.documentElement.classList].find(e=>e.startsWith("flavor-"));return s?s.split("-").slice(1).join("-").split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):null}render(){const s=this.getFlavorName(),r=this.getAttribute("label"),e=this.getAttribute("variant")||"secondary",b=s||r||"Flavor";this.shadowRoot.innerHTML=`
      <style>
        :host { display: block; }
        labs-button { width: 100%; box-sizing: border-box; }
      </style>
    <labs-button variant="${e}" size="large" style="gap:10px; justify-content:flex-start;">
        <labs-icon name="colors" slot="icon-left" width="20" height="20"></labs-icon>
        ${b}
      </labs-button>
    `;const l=this.shadowRoot.querySelector("labs-button");l&&l.addEventListener("click",d=>{d.preventDefault();const o=["vanilla","blueberry","strawberry"],a=document.documentElement,i=document.body,c=[...a.classList].find(t=>t&&t.startsWith("flavor-")),u=c?c.split("-").slice(1).join("-"):null,h=Math.max(0,o.indexOf(u)),n=o[(h+1)%o.length];for(const t of o)a.classList.remove(`flavor-${t}`),i.classList.remove(`flavor-${t}`);a.classList.add(`flavor-${n}`),i.classList.add(`flavor-${n}`);try{localStorage.setItem("tracker-flavor",n);const t=[...a.classList].find(m=>m.startsWith("theme-")),v=t?t.replace("theme-",""):"light";localStorage.setItem("tracker-theme",v)}catch{}this.render(),this.dispatchEvent(new CustomEvent("cycle-flavor",{detail:{flavor:n},bubbles:!0,composed:!0})),this.dispatchEvent(new CustomEvent("click",{bubbles:!0,composed:!0}))})}}customElements.define("labs-flavor-button",f);export{f as default};
