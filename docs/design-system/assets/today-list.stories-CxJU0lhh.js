import"./labs-input-CmX5n-Ka.js";import"./labs-card-B1H2P0RF.js";import"./labs-toast-XPHRYj4O.js";class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._items=[],this._deleted=null;const t=document.createElement("style");t.textContent=`:host{display:block;max-width:720px;margin:0 auto;font-family:inherit;color:var(--color-on-surface)}
header{display:flex;align-items:center;justify-content:space-between;margin:0 0 var(--space-4,16px) 0}
.list{display:flex;flex-direction:column;gap:12px}
.empty{color:var(--color-on-surface, #6b7280);text-align:center;padding:32px 12px;border-radius:var(--radius-1,8px);background:color-mix(in srgb,var(--color-surface) 90%, transparent)}
.controls{display:flex;gap:12px;align-items:center}
`;const e=document.createElement("div");e.className="container";const n=document.createElement("header"),o=document.createElement("h2");o.textContent="Today",o.setAttribute("part","title"),n.appendChild(o);const i=document.createElement("div");i.className="controls",this._input=document.createElement("labs-input"),this._input.setAttribute("placeholder","Add item and press Enter"),i.appendChild(this._input),n.appendChild(i);const s=document.createElement("div");s.className="list",this._list=s,e.appendChild(n),e.appendChild(s),this.shadowRoot.appendChild(t),this.shadowRoot.appendChild(e),this._onSubmit=this._onSubmit.bind(this)}connectedCallback(){this._input.addEventListener("submit",this._onSubmit),this._load(),this._ensureToast(),this._render()}disconnectedCallback(){this._input.removeEventListener("submit",this._onSubmit)}_ensureToast(){if(!document.body.querySelector("labs-toast")){const t=document.createElement("labs-toast");document.body.appendChild(t)}this._toast=document.body.querySelector("labs-toast")}_save(){try{localStorage.setItem("today-list-items",JSON.stringify(this._items))}catch{}}_load(){try{const t=localStorage.getItem("today-list-items");t&&(this._items=JSON.parse(t))}catch{this._items=[]}}_onSubmit(t){const e=t.detail.value&&t.detail.value.trim();if(!e)return;const n={id:Date.now()+Math.random().toString(36).slice(2,7),text:e,completed:!1,createdAt:Date.now()};this._items.unshift(n),this._save(),this._render()}_render(){if(this._list.innerHTML="",!this._items.length){const t=document.createElement("div");t.className="empty",t.textContent="No items yet â€” add something using the input above.",this._list.appendChild(t);return}this._items.forEach((t,e)=>{const n=document.createElement("labs-card"),o=document.createElement("div");o.slot="header",o.textContent=t.text,o.style.textDecoration=t.completed?"line-through":"none";const i=document.createElement("div");i.slot="",i.textContent=`Added ${new Date(t.createdAt).toLocaleString()}`;const s=document.createElement("div");s.slot="actions";const a=document.createElement("button");a.type="button",a.textContent=t.completed?"Mark undone":"Mark done",a.addEventListener("click",()=>{t.completed=!t.completed,this._save(),this._render()});const d=document.createElement("button");d.type="button",d.textContent="Edit",d.addEventListener("click",()=>{const l=prompt("Edit item",t.text);l!=null&&(t.text=l.trim(),this._save(),this._render())});const r=document.createElement("button");r.type="button",r.textContent="Delete",r.addEventListener("click",()=>this._deleteWithUndo(t,e)),s.appendChild(a),s.appendChild(d),s.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(s),this._list.appendChild(n)})}_deleteWithUndo(t,e){const n=this._items.splice(e,1)[0];if(this._save(),this._render(),this._toast){this._toast.show("Item deleted",{actionText:"Undo",duration:5e3});const o=()=>{this._items.splice(e,0,n),this._save(),this._render(),s()},i=()=>{s()},s=()=>{this._toast.removeEventListener("action",o),this._toast.removeEventListener("dismiss",i)};this._toast.addEventListener("action",o,{once:!0}),this._toast.addEventListener("dismiss",i,{once:!0})}}}customElements.get("today-list-app")||customElements.define("today-list-app",p);const v={title:"Apps/Today List"},c=()=>document.createElement("today-list-app");c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`() => {
  const el = document.createElement('today-list-app');
  return el;
}`,...c.parameters?.docs?.source}}};const y=["Default"];export{c as Default,y as __namedExportsOrder,v as default};
