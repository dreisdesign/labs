<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="favicon.ico">
    <title>Labs: Tracker</title>

    <script>
        // Set flavor/theme classes as early as possible for CSS tokens
        (function () {
            var root = document.documentElement;
            var flavor = localStorage.getItem('tracker-flavor') || 'blueberry';
            var theme = localStorage.getItem('tracker-theme') || 'light';
            root.classList.remove('flavor-blueberry', 'flavor-strawberry', 'flavor-vanilla');
            root.classList.remove('theme-light', 'theme-dark');
            root.classList.add('flavor-' + flavor);
            root.classList.add('theme-' + theme);
            root.setAttribute('data-color-scheme', theme);
        })();
    </script>

    <!-- Design System Tokens -->
    <link rel="stylesheet" href="../design-system/tokens/colors.css">
    <link rel="stylesheet" href="../design-system/tokens/spacing.css">
    <link rel="stylesheet" href="../design-system/tokens/typography.css">
    <link rel="stylesheet" href="../design-system/tokens/border-radius.css">
    <link rel="stylesheet" href="../design-system/tokens/shadows.css">
    <link rel="stylesheet" href="../design-system/styles/flavors.css">

    <!-- Components -->
    <script type="module" src="../design-system/components/labs-container.js"></script>
    <script type="module" src="../design-system/components/labs-footer-with-settings.js"></script>
    <script type="module" src="../design-system/components/labs-template-header.wrapped.js"></script>
    <script type="module" src="../design-system/components/labs-metric-card.js"></script>
    <script type="module" src="../design-system/components/labs-list-item.js"></script>
    <script type="module" src="../design-system/components/labs-dropdown.js"></script>
    <script type="module" src="../design-system/components/labs-icon.js"></script>
    <script type="module" src="../design-system/components/labs-button.js"></script>
    <script type="module" src="../design-system/components/labs-toast.js"></script>

    <!-- Tracker Logic -->
    <script type="module" src="./js/main.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            background: var(--color-background);
            color: var(--color-on-surface);
            font-family: var(--font-family-base);
        }

        labs-container {
            flex: 1;
            display: block;
        }

        .entry-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
            margin-top: var(--space-md);
        }

        labs-metric-card {
            margin-bottom: var(--space-md);
        }

        labs-footer-with-settings {
            margin-top: auto;
        }

        /* Position toast above the footer */
        labs-toast {
            --toast-bottom: 120px;
        }
    </style>
</head>

<body>
    <labs-container small>
        <labs-template-header-wrapped>
            <span slot="title">Tracker</span>
        </labs-template-header-wrapped>

        <labs-metric-card id="tracker-metric">
            <span slot="label">Entries</span>
            <span slot="value">0</span>
        </labs-metric-card>

        <div class="entry-list" id="entry-list">
            <!-- Tracker entries will be inserted here -->
        </div>
    </labs-container>

    <labs-footer-with-settings elevated></labs-footer-with-settings>
</body>

</html>